# 3: Кто создает топик?

Date: 2025-09-10

## Статус

Принят

## Проблема

Достоинство брокера сообщений заключается в том, что он может сохранять сообщения, даже если у отправителя и получателя какие-то проблемы. Например, они оба упали и лежат. Нужно только очередь создать постоянной и определиться кто будет ее создавать? При развертывании приложения в production или develop-окружении можно забыть, какие очереди между какими микросервисами нужно развернуть и потратить множество времени на отладку.

## Решение

Создавать очереди можно самостоятельно при помощи приложения или по задаче на SRE-отдел. В больших компаниях считается, что это задача SRE-инженеров. Однако, на практике SRE-инженер после развертывания не может проверить работоспособность всего приложения. Выручают devops-практики, когда SRE, QA и разработчики совместно разрабатывают, тестируют и доставляют приложение.

Однако проще и быстрее доставлять код, если развертыванием очередей занимается код (либо отправитель, либо получатель).

Логично, если бы тот, кто отправляет сообщение и создавал бы очередь. Однако, если если при развертывании у нас sneakers-обработчики не обнаружат очереди - они упадут с ошибкой. Поэтому в нашем приложении давайте, у нас будет создавать очередь то приложение, которое прослушивает очередь.

## Заключение

Приложение-слушатель создает долговременную очередь, чтобы избежать конфликтов при автоматизированном развертывании микросервисов.
